{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/trive/VittRaksha/app/api/transfer/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst DATA_FILE = path.join(process.cwd(), 'data', 'transactions.json');\r\n\r\n// Ensure data directory exists\r\nif (!fs.existsSync(path.dirname(DATA_FILE))) {\r\n    fs.mkdirSync(path.dirname(DATA_FILE), { recursive: true });\r\n}\r\n\r\n// Initialize file if not exists\r\nif (!fs.existsSync(DATA_FILE)) {\r\n    fs.writeFileSync(DATA_FILE, JSON.stringify([]));\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { txHash, from, to, amount, timestamp } = body;\r\n\r\n        if (!txHash || !from || !to || !amount) {\r\n            return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });\r\n        }\r\n\r\n        const newTx = {\r\n            txHash,\r\n            from,\r\n            to,\r\n            amount,\r\n            timestamp: timestamp || new Date().toISOString(),\r\n            status: 'Confirmed' // In a real app, we would verify this on-chain\r\n        };\r\n\r\n        const fileData = fs.readFileSync(DATA_FILE, 'utf-8');\r\n        const transactions = JSON.parse(fileData);\r\n\r\n        transactions.unshift(newTx); // Add to beginning\r\n\r\n        fs.writeFileSync(DATA_FILE, JSON.stringify(transactions, null, 2));\r\n\r\n        return NextResponse.json({ success: true, transaction: newTx });\r\n    } catch (error) {\r\n        console.error('Error logging transaction:', error);\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAEnD,+BAA+B;AAC/B,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,4GAAI,CAAC,OAAO,CAAC,aAAa;IACzC,wGAAE,CAAC,SAAS,CAAC,4GAAI,CAAC,OAAO,CAAC,YAAY;QAAE,WAAW;IAAK;AAC5D;AAEA,gCAAgC;AAChC,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,YAAY;IAC3B,wGAAE,CAAC,aAAa,CAAC,WAAW,KAAK,SAAS,CAAC,EAAE;AACjD;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG;QAEhD,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ;YACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,MAAM,QAAQ;YACV;YACA;YACA;YACA;YACA,WAAW,aAAa,IAAI,OAAO,WAAW;YAC9C,QAAQ,YAAY,+CAA+C;QACvE;QAEA,MAAM,WAAW,wGAAE,CAAC,YAAY,CAAC,WAAW;QAC5C,MAAM,eAAe,KAAK,KAAK,CAAC;QAEhC,aAAa,OAAO,CAAC,QAAQ,mBAAmB;QAEhD,wGAAE,CAAC,aAAa,CAAC,WAAW,KAAK,SAAS,CAAC,cAAc,MAAM;QAE/D,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,aAAa;QAAM;IACjE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}