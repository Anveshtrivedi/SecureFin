{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/trive/VittRaksha/app/api/history/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst DATA_FILE = path.join(process.cwd(), 'data', 'transactions.json');\r\n\r\nexport async function GET(request: Request) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const address = searchParams.get('address');\r\n\r\n        if (!fs.existsSync(DATA_FILE)) {\r\n            return NextResponse.json({ transactions: [] });\r\n        }\r\n\r\n        const fileData = fs.readFileSync(DATA_FILE, 'utf-8');\r\n        const transactions = JSON.parse(fileData);\r\n\r\n        if (address) {\r\n            const filtered = transactions.filter((tx: any) =>\r\n                tx.from.toLowerCase() === address.toLowerCase() ||\r\n                tx.to.toLowerCase() === address.toLowerCase()\r\n            );\r\n            return NextResponse.json({ transactions: filtered });\r\n        }\r\n\r\n        return NextResponse.json({ transactions });\r\n    } catch (error) {\r\n        console.error('Error fetching history:', error);\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAE5C,eAAe,IAAI,OAAgB;IACtC,IAAI;QACA,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,UAAU,aAAa,GAAG,CAAC;QAEjC,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,YAAY;YAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,cAAc,EAAE;YAAC;QAChD;QAEA,MAAM,WAAW,wGAAE,CAAC,YAAY,CAAC,WAAW;QAC5C,MAAM,eAAe,KAAK,KAAK,CAAC;QAEhC,IAAI,SAAS;YACT,MAAM,WAAW,aAAa,MAAM,CAAC,CAAC,KAClC,GAAG,IAAI,CAAC,WAAW,OAAO,QAAQ,WAAW,MAC7C,GAAG,EAAE,CAAC,WAAW,OAAO,QAAQ,WAAW;YAE/C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,cAAc;YAAS;QACtD;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAa;IAC5C,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}